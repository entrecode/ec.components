(window.webpackJsonp=window.webpackJsonp||[]).push([[56],{144:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return c})),a.d(t,"rightToc",(function(){return r})),a.d(t,"default",(function(){return b}));var n=a(1),l=(a(0),a(179)),o=a(197);const c={id:"form-options",title:"Form API",sidebar_label:"Form API"},r=[{value:"Example",id:"example",children:[]},{value:"form components",id:"form-components",children:[{value:"components using forms",id:"components-using-forms",children:[]}]},{value:"parts",id:"parts",children:[{value:"header",id:"header",children:[]},{value:"body",id:"body",children:[]},{value:"footer",id:"footer",children:[]}]},{value:"field config",id:"field-config",children:[]},{value:"validate",id:"validate",children:[]},{value:"changed",id:"changed",children:[]},{value:"input views",id:"input-views",children:[{value:"available input views",id:"available-input-views",children:[]},{value:"inputView in the editor",id:"inputview-in-the-editor",children:[]},{value:"entry-select + entry-selects",id:"entry-select--entry-selects",children:[]},{value:"select",id:"select",children:[]},{value:"copy",id:"copy",children:[]}]},{value:"custom form components",id:"custom-form-components",children:[{value:"counter example",id:"counter-example",children:[]},{value:"container example",id:"container-example",children:[]},{value:"entryComponents",id:"entrycomponents",children:[]}]},{value:"custom form markup",id:"custom-form-markup",children:[{value:"via ec-input + ec-output",id:"via-ec-input--ec-output",children:[]},{value:"via form controls",id:"via-form-controls",children:[]},{value:"nested fields",id:"nested-fields",children:[]}]}],i={rightToc:r};function b({components:e,...t}){return Object(l.b)("wrapper",Object(n.a)({},i,t,{components:e,mdxType:"MDXLayout"}),Object(l.b)("p",null,"This document shows which config options can be used to control forms."),Object(l.b)("h2",{id:"example"},"Example"),Object(l.b)("p",null,"For all following snippets, let's assume the following template"),Object(l.b)("pre",null,Object(l.b)("code",Object(n.a)({parentName:"pre"},{className:"language-html"}),'<ec-entry-form model="muffin" [config]="muffinConfig" #muffinForm></ec-entry-form>\n')),Object(l.b)("p",null,"... made available:"),Object(l.b)("pre",null,Object(l.b)("code",Object(n.a)({parentName:"pre"},{className:"language-ts"}),"class AppComponent {\n  @ViewChild('muffinForm') muffinForm;\n  muffinConfig = {\n    /* config here */\n  };\n}\n")),Object(l.b)("h2",{id:"form-components"},"form components"),Object(l.b)(o.a,{visibleNodes:["ec-form","ec-entry-form","ec-resource-form"],showCheckboxes:!1,height:200,width:600,mdxType:"ComponentsOverview"}),Object(l.b)("p",null,"The techniques of this document apply to the following components:"),Object(l.b)("table",null,Object(l.b)("thead",{parentName:"table"},Object(l.b)("tr",{parentName:"thead"},Object(l.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"components"),Object(l.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"description"),Object(l.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"package"))),Object(l.b)("tbody",{parentName:"table"},Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"ec-form"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"base form component. Parent of all other forms. Not datamanager specific."),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"@ec.components/ui")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"ec-entry-form"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"form for model entries."),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"@ec.components/data")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"ec-resource-form"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"form for resources of ec apis (like datamanagers, models, apps etc..)"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"@ec.components/data")))),Object(l.b)("p",null,"Also check out ",Object(l.b)("a",Object(n.a)({parentName:"p"},{href:"/docs/core-concepts/config-pipeline"}),"Config Pipeline")," for other ways to set the config."),Object(l.b)("h3",{id:"components-using-forms"},"components using forms"),Object(l.b)(o.a,{visibleNodes:["ec-form","ec-entry-form","ec-crud","ec-select","ec-entry-select","ec-list-header","ec-input","ec-entry-pop","ec-resource-select"],showCheckboxes:!1,height:400,width:600,mdxType:"ComponentsOverview"}),Object(l.b)("p",null,"The following components use forms as a part of their functionality:"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"ec-crud"),Object(l.b)("li",{parentName:"ul"},"ec-entry-pop"),Object(l.b)("li",{parentName:"ul"},"ec-list-header (filter inputs)")),Object(l.b)("p",null,"To alter the config of forms that are part of those components, you can use the ",Object(l.b)("a",Object(n.a)({parentName:"p"},{href:"/docs/core-concepts/config-pipeline"}),"Config Pipeline"),"."),Object(l.b)("h2",{id:"parts"},"parts"),Object(l.b)("p",null,"A typical form looks like this:"),Object(l.b)("p",null,Object(l.b)("img",Object(n.a)({parentName:"p"},{src:"../../static/img/form.png",alt:"form"}))),Object(l.b)("p",null,"The form consists of three main parts:"),Object(l.b)("h3",{id:"header"},"header"),Object(l.b)("p",null,"This part is only relevant for entry forms. It displays the four immutable system fields. Values can be copied by click."),Object(l.b)("h3",{id:"body"},"body"),Object(l.b)("p",null,"The form body contains all field inputs. The look and behaviour of each form field depends on its type."),Object(l.b)("h3",{id:"footer"},"footer"),Object(l.b)("p",null,"Contains buttons. In entry forms, the buttons depend on the permissions of the user. If all permissions are granted, a save button and a delete button will be shown."),Object(l.b)("h2",{id:"field-config"},"field config"),Object(l.b)("p",null,"The following field options control the forms looks/behaviour:"),Object(l.b)("table",null,Object(l.b)("thead",{parentName:"table"},Object(l.b)("tr",{parentName:"thead"},Object(l.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"option"),Object(l.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"description"),Object(l.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"type"))),Object(l.b)("tbody",{parentName:"table"},Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"field.hideInForm"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"if true, the field will not be visible."),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"boolean")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"field.form"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"if false, the field will not be visible and not be loaded."),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"boolean")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"field.label"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"label above input"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"string")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"field.placeholder"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"input placeholder"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"string")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"field.columns"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"how many columns are used by the field"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"number 1-12")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"field.immutable"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"if true, the property won't be sent when saving"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"boolean")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"field.readOnly"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"if true, the property won't be editable"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"boolean")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"field.required"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"if true, the field needs to be filled out"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"boolean")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"field.prefill"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"prefill value for new entries"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"any")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"field.input"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"custom input component"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Component")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"field.formComponent"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"custom input component used in form only"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Component")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"field.validate"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"transformation for form validation"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"transformation function")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"field.changed"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"callback when a field changes"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"(value, form)")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"field.inputView"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"view for input component"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"string")))),Object(l.b)("h2",{id:"validate"},"validate"),Object(l.b)("p",null,"To apply custom validation magic to your fields, you can use the validate transformation:"),Object(l.b)("pre",null,Object(l.b)("code",Object(n.a)({parentName:"pre"},{className:"language-ts"}),"muffinFormConfig = {\n  fields: {\n    name: {\n      validate: (value) => {\n        if (value === 'Captain Crumble') {\n          return 'This Name is copyrighted, do not use it';\n        }\n      },\n    },\n    amazement_factor: {\n      validate: (value) => {\n        if (value > 10 || value < 1) {\n          return 'Must be between 1 and 10';\n        }\n      },\n    },\n  },\n};\n")),Object(l.b)("p",null,"It will run when the field values changes. If anything is returned, it is interpreted as a malicious input. The message is outputted below the field."),Object(l.b)("p",null,"For custom input components, you can display the validation error by placing this somewhere in your template:"),Object(l.b)("pre",null,Object(l.b)("code",Object(n.a)({parentName:"pre"},{className:"language-html"}),'<ec-input-errors [control]="control"></ec-input-errors>\n')),Object(l.b)("h2",{id:"changed"},"changed"),Object(l.b)("p",null,"with the changed callback, you can run custom logic when the field value changes:"),Object(l.b)("pre",null,Object(l.b)("code",Object(n.a)({parentName:"pre"},{className:"language-ts"}),"muffinFormConfig = {\n  fields: {\n    name: {\n      changed: (value, form: FormComponent) => {\n        // do something with the new value. maybe update other form fields\n        form.group.get('url').patchValue(slugify(value));\n      },\n    },\n    url: {},\n  },\n};\n")),Object(l.b)("p",null,"In the above example, when changing the name field, the url is automatically updated with a slugified version of the new name."),Object(l.b)("h2",{id:"input-views"},"input views"),Object(l.b)(o.a,{visibleNodes:["ec-form","ec-entry-form","ec-resource-form","ec-input","ec-default-input","ec-default-entry-input"],showCheckboxes:!1,height:400,width:600,mdxType:"ComponentsOverview"}),Object(l.b)("h3",{id:"available-input-views"},"available input views"),Object(l.b)("p",null,"Setting inputView on a field will control the input that is used. By default, the most common inputs are implemented in the components.\nMost views are derived from the ",Object(l.b)("a",Object(n.a)({parentName:"p"},{href:"https://doc.entrecode.de/data_manager/#types"}),"field types of the entrecode API"),"."),Object(l.b)("table",null,Object(l.b)("thead",{parentName:"table"},Object(l.b)("tr",{parentName:"thead"},Object(l.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"inputView"),Object(l.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"for type"),Object(l.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"description"),Object(l.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"is default"),Object(l.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"specials"))),Object(l.b)("tbody",{parentName:"table"},Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"string"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"text"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"normal text input"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"X"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}))),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"textarea"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"formattedText"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"textarea input"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"X"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}))),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"number"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"number + decimal"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"number input"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"X"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}))),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"color"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"text"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"HTML5 color input"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null})),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}))),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"boolean"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"boolean"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"checkbox"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"X"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}))),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"email"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"email"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"email input"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"X"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}))),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"url"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"url"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"url input"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"X"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}))),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"toggle"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"boolean"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null})),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null})),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}))),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"date"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"datetime"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"ec-datetime"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"X"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}))),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"select"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"text"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"html select"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null})),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"values")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"copy"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"any"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"click to copy"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null})),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"uses copy transformation")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"phone\xa0"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"phone"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"phone input"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"X"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}))),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"entry-select"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"entry"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"shows entry-select"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"X"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"expects validation to be set to model title")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"entries-select"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"entries"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"shows entry-select"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"X"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"expects validation to be set to model title")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"entries-actionbar"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"entries"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"shows actionbar"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null})),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"works without validation")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"entry-list-select"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"entries"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"renders entry-list of selection"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null})),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"will load the entry with levels 2 request")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"asset-select\xa0"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"asset"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"single asset select"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"X"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"for legacyAssets (no assetGroup set in field validation)")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"assets-select\xa0"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"assets"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"multiple assets select"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"X"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"for legacyAssets (no assetGroup set in field validation)")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"dmAsset-select\xa0"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"dmAsset"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"single dmAssets select"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"X"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"expects validation to be set to assetGroupID")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"dmAssets-select\xa0"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"dmAssets"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"multiple dmAssets select"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"X"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"expects validation to be set to assetGroupID")))),Object(l.b)("p",null,"not passing an inputView will use the default inputView. If you pass an invalid inputView (not existing), the field's value will be displayed."),Object(l.b)("p",null,"sources:"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("a",Object(n.a)({parentName:"li"},{href:"https://github.com/entrecode/ec.components/blob/master/packages/ui/src/lib/form/default-input/default-input.component.html"}),"default-input")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("a",Object(n.a)({parentName:"li"},{href:"https://github.com/entrecode/ec.components/blob/master/packages/data/src/lib/entry-form/default-entry-input.component.html"}),"default-entry-input"))),Object(l.b)("h3",{id:"inputview-in-the-editor"},"inputView in the editor"),Object(l.b)("p",null,"In the model field config of the ",Object(l.b)("a",Object(n.a)({parentName:"p"},{href:"https://e.entrecode.de"}),"ec.editor"),", you can also select a default inputView in the frontend tab. Currently, this is only possible for entries fields, but will be available for more in the future (TODO: add inputViews to type-config.service)."),Object(l.b)("h3",{id:"entry-select--entry-selects"},"entry-select + entry-selects"),Object(l.b)("p",null,"As you see above, entry/entries fields will default to inputViews entry-select / entries-select. You can customize the entry select via nestedCrudConfig, which is passed to the entry-select:"),Object(l.b)("pre",null,Object(l.b)("code",Object(n.a)({parentName:"pre"},{className:"language-ts"}),"bakerConfig = {\n  fields: {\n    /* other fields */\n    baked_muffins: { // entries field\n      nestedCrudConfig: {\n        disableSearchbar: true\n        disableDrag: true\n        disableRemove: true\n        disableSearchbar: true\n        disableCreatePop: true\n        /* or use methods */\n        methods: ['get','put','post','delete']\n      }\n    }\n  }\n}\n")),Object(l.b)("p",null,"The nestedCrudConfig is also passed down to the children of entry-select: entry-list-pop & entry-pop. You could of course also pass a fields config but it is recommended you use ModelConfigService. See ",Object(l.b)("a",Object(n.a)({parentName:"p"},{href:"configuration#by-modelconfigservice"}),"Configuration")," for details."),Object(l.b)("h3",{id:"select"},"select"),Object(l.b)("p",null,"To render a html select with options:"),Object(l.b)("pre",null,Object(l.b)("code",Object(n.a)({parentName:"pre"},{className:"language-ts"}),"const muffinConfig = {\n  fields: {\n    /* .. */\n    country: {\n      inputView: 'select',\n      values: ['Germany', 'USA', 'Kongo'],\n    },\n  },\n};\n")),Object(l.b)("h3",{id:"copy"},"copy"),Object(l.b)("p",null,"To render a copyable date:"),Object(l.b)("pre",null,Object(l.b)("code",Object(n.a)({parentName:"pre"},{className:"language-ts"}),"const muffinConfig = {\n  fields: {\n    /* .. */\n    _created: {\n      inputView: 'copy',\n      copy: (value) => moment(value).toISOString(),\n    },\n  },\n};\n")),Object(l.b)("p",null,"This uses the copy transform to turn the date into an iso string before copying. If you do not define a copy transform, the value will be copied as is (as returned by resolve)."),Object(l.b)("h2",{id:"custom-form-components"},"custom form components"),Object(l.b)("p",null,"You can pass your own components to use them as input"),Object(l.b)("h3",{id:"counter-example"},"counter example"),Object(l.b)("pre",null,Object(l.b)("code",Object(n.a)({parentName:"pre"},{className:"language-ts"}),"this.modelConfig.set('muffin', {\n  fields: {\n    /* .. */\n    count: {\n      input: CounterComponent,\n    },\n  },\n});\n")),Object(l.b)("p",null,"The passed component will be loaded dynamically into the respective ec-input, which is part of the form."),Object(l.b)("p",null,"The following template renders the counter:"),Object(l.b)("pre",null,Object(l.b)("code",Object(n.a)({parentName:"pre"},{className:"language-html"}),'<div class="input-group">\n  <div class="input-group__addon">\n    <a class="btn btn_clear btn_small is-bold" (click)="decrement()">-</a>\n    <div class="input">{{ value }}</div>\n    <a class="btn btn_clear btn_small is-bold" (click)="increment()">+</a>\n  </div>\n</div>\n')),Object(l.b)("p",null,"To have control to the form input's value, you need to use angulars ControlValueAccessor:"),Object(l.b)("pre",null,Object(l.b)("code",Object(n.a)({parentName:"pre"},{className:"language-ts"}),"import { Component, OnInit, Input } from '@angular/core';\nimport { InputComponent } from '../../../packages/ui';\nimport { ControlValueAccessor } from '@angular/forms';\n\n@Component({\n  selector: 'app-counter',\n  templateUrl: './counter.component.html',\n})\nexport class CounterComponent extends InputComponent implements ControlValueAccessor {\n  value = 0;\n\n  increment() {\n    this.propagateChange(++this.value);\n  }\n\n  decrement() {\n    this.propagateChange(--this.value);\n  }\n\n  writeValue(value: any) {\n    this.value = value;\n    console.log('received value', value);\n  }\n\n  propagateChange = (_: any) => {};\n\n  registerOnChange(fn) {\n    this.propagateChange = fn;\n  }\n\n  registerOnTouched() {}\n}\n")),Object(l.b)("p",null,"Now you can implement your own logic and call propagateChange when you change the value from your component, and react to change via the writeValue method!\nYou now could also use your component with ngModel or formControl in another context!\nMore information on this pattern: ",Object(l.b)("a",Object(n.a)({parentName:"p"},{href:"https://blog.thoughtram.io/angular/2016/07/27/custom-form-controls-in-angular-2.html"}),"https://blog.thoughtram.io/angular/2016/07/27/custom-form-controls-in-angular-2.html")),Object(l.b)("h3",{id:"container-example"},"container example"),Object(l.b)("p",null,"Instead of using a single component for one specific field, you could also use one component to serve as a container for multiple possible views:"),Object(l.b)("pre",null,Object(l.b)("code",Object(n.a)({parentName:"pre"},{className:"language-ts"}),"this.modelConfig.set('muffin', {\n      fields: {\n        /** */\n        url: {\n          label: 'URL',\n          inputView: 'speakingurl',\n          input: CustomInputComponent\n        },\n        count: {\n          label: 'Count',\n          inputView: 'counter',\n          input: CustomInputComponent\n        }\n})\n")),Object(l.b)("p",null,"The component is rather simple:"),Object(l.b)("pre",null,Object(l.b)("code",Object(n.a)({parentName:"pre"},{className:"language-ts"}),"import { Component } from '@angular/core';\nimport { InputComponent } from '@ec.components/ui';\n\n@Component({\n  selector: 'app-custom-input',\n  templateUrl: './custom-input.component.html',\n  styleUrls: ['./custom-input.component.scss'],\n})\nexport class CustomInputComponent extends InputComponent {}\n")),Object(l.b)("p",null,"Extending InputComponent enables you to use the following properties in your template:"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"control FormControl instance"),Object(l.b)("li",{parentName:"ul"},"group FormGroup instance"),Object(l.b)("li",{parentName:"ul"},"field Field instance"),Object(l.b)("li",{parentName:"ul"},"item Item instance"),Object(l.b)("li",{parentName:"ul"},"config"),Object(l.b)("li",{parentName:"ul"},"property")),Object(l.b)("pre",null,Object(l.b)("code",Object(n.a)({parentName:"pre"},{className:"language-html"}),'<div [ngSwitch]="field.getView(\'input\')" *ngIf="group" [formGroup]="group">\n  <ec-input-errors [control]="group.get(field.property)"></ec-input-errors>\n  <div *ngSwitchCase="\'speakingurl\'">\n    <input [id]="field.id" type="text" [formControl]="control" />\n  </div>\n  <div *ngSwitchCase="\'counter\'">\n    <app-counter [formControl]="control"></app-counter>\n  </div>\n</div>\n')),Object(l.b)("p",null,"Of course you could also switch based on property name or type, depending on your application.\nThe id property of field is referenced in the label of the form. By adding it to the input makes sure your label click enters the input."),Object(l.b)("h3",{id:"entrycomponents"},"entryComponents"),Object(l.b)("p",null,"Because the custom component will be loaded dynamically, your module needs to declare it as entryComponent:"),Object(l.b)("pre",null,Object(l.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js"}),"@NgModule({\n  entryComponents: [CounterComponent, CustomInputComponent],\n  /** more stuff **/\n})\nexport class AppModule {}\n")),Object(l.b)("h2",{id:"custom-form-markup"},"custom form markup"),Object(l.b)("p",null,"To use your own markup for a form, you can use one of the following approaches."),Object(l.b)("h3",{id:"via-ec-input--ec-output"},"via ec-input + ec-output"),Object(l.b)("p",null,"ec-input and ec-output can be used to render a fields input:"),Object(l.b)("pre",null,Object(l.b)("code",Object(n.a)({parentName:"pre"},{className:"language-html"}),'<ec-entry-form model="muffin" #form>\n  \x3c!-- input --\x3e\n  <label\n    >Title\n    <ec-input property="title" [item]="form.form" [group]="form.group"></ec-input>\n  </label>\n  \x3c!-- output --\x3e\n  <label>Amazement Factor</label>\n  <ec-output property="amazement_factor" [item]="form.form" [group]="form.group"></ec-output>\n  <a class="btn" (click)="form.submit()">Submit</a>\n</ec-entry-form>\n')),Object(l.b)("p",null,"As soon as the ec-entry-form contains elements (or you pass empty=true, as mentioned below), the contents will be rendered instead of the default form."),Object(l.b)("p",null,"Features you have to add manually (if needed)"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"submit button"),Object(l.b)("li",{parentName:"ul"},"layout (field.columns will be ignored)")),Object(l.b)("p",null,"NOTE: dont wrap labels around complex input components, because they fire ghost clicks!"),Object(l.b)("h3",{id:"via-form-controls"},"via form controls"),Object(l.b)("p",null,"If you do not want to use ec-input, you can also access the form controls directly:"),Object(l.b)("pre",null,Object(l.b)("code",Object(n.a)({parentName:"pre"},{className:"language-html"}),'<ec-entry-form model="muffin" #form>\n  \x3c!-- input --\x3e\n  <label>Title</label>\n  <input type="text" [formControl]="form.group.get(\'title\')" />\n  <ec-input-errors [control]="form.group.get(\'title\')"></ec-input-errors>\n\n  <a class="btn" (click)="form.submit()">Submit</a>\n</ec-entry-form>\n')),Object(l.b)("p",null,"As you see, the ",Object(l.b)("em",{parentName:"p"},"ec-input-errors")," component can be used to automatically handle validation errors.\nThat component is also used by the default input components which will be loaded by ec-input.\nNote that you will have to manually have to care for:"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"readOnly state"),Object(l.b)("li",{parentName:"ul"},"placeholder"),Object(l.b)("li",{parentName:"ul"},"label"),Object(l.b)("li",{parentName:"ul"},"error handling (use ec-input-errors)"),Object(l.b)("li",{parentName:"ul"},"layout (field.columns will be ignored)")),Object(l.b)("p",null,"Consider using ec-input instead to get the component sugar + lower mainetenance cost."),Object(l.b)("h3",{id:"nested-fields"},"nested fields"),Object(l.b)("p",null,"In some cases, you might want to control values that are not a direct property of your target object. Imagine an API expecting this:"),Object(l.b)("pre",null,Object(l.b)("code",Object(n.a)({parentName:"pre"},{className:"language-json"}),'{\n  "title": "Example Title",\n  "config": {\n    "useVanillaSauce": true,\n    "secrets": {\n      "fridgePassword": "ilikedampfnudels"\n    }\n  }\n}\n')),Object(l.b)("p",null,'If you want to add inputs to control the nested properties "useVanillaSauce" and "fridgePassword", you can do that:'),Object(l.b)("pre",null,Object(l.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js"}),"{\n  fields: {\n    title: {\n      inputView: 'string'\n    },\n    'config_useVanillaSauce': {\n      label: 'Use Vanilla Sauce',\n      immutable: true,\n      inputView: 'toggle',\n      resolve: (body, item) => item.resolvePath('config.useVanillaSauce'),\n      changed: (value, form) => form.patchObjectField('config', 'useVanillaSauce', value)\n    },\n    'config_fridgePassword': {\n      label:'Fridge Password',\n      immutable: true,\n      inputView:'password',\n      resolve: (body, item) => item.resolvePath('config.secrets.useVanillaSauce'),\n      changed: (value, form) => form.patchObjectField('config', 'secrets.fridgePassword', value)\n    }\n  }\n}\n")),Object(l.b)("p",null,"The immutable flags will tell the form to ignore the field value, so we can handle it ourselfes.\nOn every change, we patch the value of the config with the updated value."),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"The helper function resolvePath returns the given path on the item body, if existing. This function is a handy helper to handle deep objects."),Object(l.b)("li",{parentName:"ul"},"The helper function pathObjectField is similar to resolvePath, but writes to the given path on the control of the field (calls patchValue)")))}b.isMDXComponent=!0},197:function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));a(12);var n=a(0),l=a.n(n),o=a(227),c=a.n(o);const r={data:{color:"#AB4B43"},ui:{color:"green"},optional:{color:"gray"},calendar:{color:"darkblue"},modules:{color:"black"}},i={component:"box",module:"ellipse"},b=[{label:"ec-crud",package:"data",type:"component"},{label:"ec-entry-list",package:"data",type:"component"},{label:"ec-entry-list-pop",package:"data",type:"component"},{label:"ec-resource-list",package:"data",type:"component"},{label:"ec-resource-form",package:"data",type:"component"},{label:"ec-list",package:"ui",type:"component"},{label:"ec-list-header",package:"ui",type:"component"},{label:"ec-list-items",package:"ui",type:"component"},{label:"ec-pagination",package:"ui",type:"component"},{label:"ec-entry-pop",package:"data",type:"component"},{label:"ec-entry-form",package:"data",type:"component"},{label:"ec-entry-select",package:"data",type:"component"},{label:"ec-entry-list-select",package:"data",type:"component"},{label:"ec-entry-actionbar",package:"data",type:"component"},{label:"ec-default-entry-input",package:"data",type:"component"},{label:"ec-resource-delete-pop",package:"data",type:"component"},{label:"ec-asset-select",package:"data",type:"component"},{label:"ec-select",package:"ui",type:"component"},{label:"ec-actionbar",package:"ui",type:"component"},{label:"ec-form",package:"ui",type:"component"},{label:"ec-input",package:"ui",type:"component"},{label:"ec-default-input",package:"ui",type:"component"},{label:"ec-default-output",package:"ui",type:"component"},{label:"ec-input-errors",package:"ui",type:"component"},{label:"ec-datetime",package:"calendar",type:"component"},{label:"ec-calendar",package:"calendar",type:"component"},{label:"ec-month",package:"calendar",type:"component"},{label:"ec-daterange",package:"calendar",type:"component"},{label:"ec-heatmap",package:"calendar",type:"component"},{label:"ec-dynamic-slot",package:"ui",type:"component"},{label:"ec-loader",package:"ui",type:"component"},{label:"ec-output",package:"ui",type:"component"},{label:"ec-pop",package:"ui",type:"component"},{label:"ec-modal",package:"ui",type:"component"},{label:"ec-location-picker",package:"optional",type:"component"},{label:"ec-ace",package:"optional",type:"component"},{label:"ec-toggle",package:"ui",type:"component"},{label:"ec-login",package:"data",type:"component"},{label:"ec-password-reset",package:"data",type:"component"},{label:"ecEntry",package:"data",type:"directive"},{label:"ecEntries",package:"data",type:"directive"},{label:"ecAsset",package:"data",type:"directive"},{label:"ec-asset-list-pop",package:"data",type:"component"},{label:"ec-asset-select",package:"data",type:"component"},{label:"ec-searchbar",package:"data",type:"component"},{label:"ec-upload-select",package:"data",type:"component"},{label:"ec-assetgroup-select",package:"data",type:"component"},{label:"ecDropzone",package:"data",type:"component"},{label:"ecImage",package:"data",type:"component"},{label:"ecImage",package:"data",type:"component"},{label:"ec-image-select-pop",package:"data",type:"component"},{label:"FilesModule",package:"modules",type:"module"},{label:"DataModule",package:"modules",type:"module"},{label:"UiModule",package:"modules",type:"module"},{label:"SdkModule",package:"modules",type:"module"},{label:"AuthModule",package:"modules",type:"module"},{label:"ResourceModule",package:"modules",type:"module"},{label:"UtilityModule",package:"modules",type:"module"},{label:"PopModule",package:"modules",type:"module"},{label:"NotificationsModule",package:"modules",type:"module"},{label:"LoaderModule",package:"modules",type:"module"},{label:"ListModule",package:"modules",type:"module"},{label:"FormModule",package:"modules",type:"module"},{label:"SelectModule",package:"modules",type:"module"},{label:"IconModule",package:"modules",type:"module"},{label:"SymbolModule",package:"modules",type:"module"},{label:"ec-tabs",package:"ui",type:"component"},{label:"ec-tab",package:"ui",type:"component"},{label:"ec-menu",package:"ui",type:"component"},{label:"ec-login-form",package:"ui",type:"component"},{label:"ec-signup-form",package:"ui",type:"component"},{label:"ecFocus",package:"ui",type:"component"},{label:"KeycommandsService",package:"ui",type:"service"},{label:"PopService",package:"ui",type:"service"}],p=[{from:"ec-crud",to:"ec-entry-list"},{from:"ec-crud",to:"ec-entry-pop"},{from:"ec-entry-list",to:"ec-resource-list"},{from:"ec-resource-list",to:"ec-list"},{from:"ec-entry-pop",to:"ec-entry-form"},{from:"ec-entry-pop",to:"ec-pop"},{from:"ec-entry-pop",to:"ec-resource-delete-pop"},{from:"ec-entry-form",to:"ec-form"},{from:"ec-resource-form",to:"ec-form"},{from:"ec-entry-select",to:"ec-entry-pop"},{from:"ec-entry-select",to:"ec-entry-list"},{from:"ec-entry-select",to:"ec-resource-delete-pop"},{from:"ec-entry-select",to:"ec-entry-list-pop"},{from:"ec-entry-list-select",to:"ec-input"},{from:"ec-entry-list-select",to:"ec-entry-list-pop"},{from:"ec-entry-list-select",to:"ec-entry-list"},{from:"ec-entry-list-select",to:"ec-entry-pop"},{from:"ec-entry-actionbar",to:"ec-actionbar"},{from:"ec-actionbar",to:"ec-select"},{from:"ec-list",to:"ec-list-header"},{from:"ec-list-header",to:"ec-form"},{from:"ec-list-header",to:"ec-input"},{from:"ec-list-items",to:"ec-output"},{from:"ec-list",to:"ec-list-items"},{from:"ec-list",to:"ec-pagination"},{from:"ec-form",to:"ec-input"},{from:"ec-default-entry-input",to:"ec-entry-select"},{from:"ec-default-entry-input",to:"ec-entry-actionbar"},{from:"ec-default-entry-input",to:"ec-input-errors"},{from:"ec-default-entry-input",to:"ec-entry-list-select"},{from:"ec-default-entry-input",to:"ec-asset-select"},{from:"ec-default-entry-input",to:"ec-output"},{from:"ec-default-input",to:"ec-datetime"},{from:"ec-default-input",to:"ec-toggle"},{from:"ec-default-input",to:"ec-input-errors"},{from:"ec-input",to:"ec-dynamic-slot"},{from:"ec-input",to:"ec-default-input"},{from:"ec-input",to:"ec-default-entry-input"},{from:"ec-output",to:"ec-dynamic-slot"},{from:"ec-output",to:"ec-default-output"},{from:"ec-entry-select",to:"ec-select"},{from:"ec-select",to:"ec-pop"},{from:"ec-select",to:"ec-list"},{from:"ec-crud",to:"ec-entry-list"},{from:"ec-datetime",to:"ec-calendar"},{from:"ec-calendar",to:"ec-month"},{from:"ec-daterange",to:"ec-calendar"},{from:"ec-heatmap",to:"ec-calendar"},{from:"ec-login",to:"ec-login-form"},{from:"ec-signup-form",to:"ec-login-form"},{from:"ec-signup",to:"ec-signup-form"},{from:"DataModule",to:"FilesModule"},{from:"DataModule",to:"ec-crud"},{from:"FilesModule",to:"ec-asset-list-pop"},{from:"FilesModule",to:"ec-asset-select"},{from:"FilesModule",to:"ec-image-select-pop"},{from:"ec-asset-list-pop",to:"ec-resource-list"},{from:"ec-asset-list-pop",to:"ec-resource-select"},{from:"ec-asset-list-pop",to:"ec-pagination"},{from:"ec-asset-list-pop",to:"ec-select"},{from:"ec-asset-list-pop",to:"ec-searchbar"},{from:"ec-asset-list-pop",to:"ec-upload-select"},{from:"ec-asset-select",to:"ec-upload-select"},{from:"ec-asset-select",to:"ec-select"},{from:"ec-image-select-pop",to:"ec-pop"},{from:"ec-image-select-pop",to:"ec-form"},{from:"ec-image-select-pop",to:"ec-asset-select"},{from:"DataModule",to:"ec-entry-list"},{from:"DataModule",to:"ecEntry"},{from:"DataModule",to:"ecEntries"},{from:"DataModule",to:"ec-entry-form"},{from:"DataModule",to:"ec-entry-pop"},{from:"DataModule",to:"ec-default-entry-input"},{from:"DataModule",to:"ec-entry-list-select"},{from:"DataModule",to:"ec-crud"},{from:"DataModule",to:"ec-entry-select"},{from:"DataModule",to:"ec-entry-actionbar"},{from:"DataModule",to:"ec-entry-list-pop"},{from:"DataModule",to:"UiModule"},{from:"DataModule",to:"SdkModule"},{from:"DataModule",to:"FilesModule"},{from:"DataModule",to:"AuthModule"},{from:"DataModule",to:"ResourceModule"},{from:"UiModule",to:"UtilityModule"},{from:"UiModule",to:"PopModule"},{from:"UiModule",to:"NotificationsModule"},{from:"UiModule",to:"LoaderModule"},{from:"UiModule",to:"ListModule"},{from:"UiModule",to:"FormModule"},{from:"UiModule",to:"SelectModule"},{from:"UiModule",to:"IconModule"},{from:"UiModule",to:"SymbolModule"},{from:"UtilityModule",to:"ec-tabs"},{from:"UtilityModule",to:"ec-tab"},{from:"UtilityModule",to:"ec-menu"},{from:"UtilityModule",to:"ec-login-form"},{from:"UtilityModule",to:"ec-signup-form"},{from:"UtilityModule",to:"ecFocus"},{from:"UtilityModule",to:"KeycommandsService"},{from:"PopModule",to:"ec-pop"},{from:"PopModule",to:"ec-modal"},{from:"PopModule",to:"PopService"}],u=e=>p.filter(t=>t.from===e).map(e=>e.to).map(e=>b.find(t=>t.label===e)),m=({visibleNodes:e,levels:t,showCheckboxes:a,width:o,height:m,visiblePackages:s})=>{[o,m]=[o||800,m||600];const[d,O]=Object(n.useState)(Object.keys(r));s&&(console.log("visible",s),e=b.filter(e=>s.includes(e.package)).map(e=>e.label)),t&&e&&(console.log("chlidrenOnly",e),e=e.reduce((e,t)=>e.concat(u(t).map(e=>e.label)),[]),console.log("visible",e));const[j,f]=Object(n.useState)(b.filter(t=>(e||b.map(e=>e.label)).includes(t.label))),g=e=>{const t=b.find(t=>t.label===e),a=u(t.label).concat([t]),n=(l=t.label,p.filter(e=>e.to===l).map(e=>e.from).map(e=>b.find(t=>t.label===e)));var l;console.log("children",a),console.log("parents",n);const o=j.concat(a).filter((e,t,a)=>a.indexOf(e)===t);f(o)},h=b.filter(e=>d.includes(e.package)).filter(e=>!!j.find(t=>t.label===e.label)).map((e,t)=>({...e,id:t,color:(r[e.package]?r[e.package].color:"red")||"white",shape:i[e.type]||"box",font:{color:"white"},size:10})),y=p.map((e,t)=>({from:h.find(t=>t.label===e.from),to:h.find(t=>t.label===e.to)})).filter(({from:e,to:t})=>void 0!==e&&void 0!==t).map(({from:e,to:t})=>({from:e.id,to:t.id,width:3})),N={physics:{barnesHut:{damping:.5,springConstant:.01,avoidOverlap:1,gravitationalConstant:-4e3},timestep:.2},interaction:{zoomView:!1},layout:{hierarchical:!1},edges:{color:"#000000",smooth:{type:"continuous"}},width:o+"px",height:m+"px"},v={select:function(e){e.nodes.forEach(e=>{const t=b.find(t=>t.label===h[e].label);g(t.label)},[])}},w={nodes:h,edges:y};return l.a.createElement(l.a.Fragment,null,l.a.createElement(c.a,{graph:w,options:N,events:v,getNetwork:e=>{e.on("zoom",e=>{})}}),!a||l.a.createElement("ul",null,Object.keys(r).map((e,t)=>l.a.createElement("li",{key:t,style:{listStyle:"none"}},l.a.createElement("label",null,l.a.createElement("input",{onChange:()=>{return t=e,void(d.includes(t)?O(d.filter(e=>e!==t)):O(d.concat([t])));var t},type:"checkbox",checked:d.includes(e)}),e),l.a.createElement("ul",null,b.filter(t=>t.package===e).map((e,a)=>l.a.createElement("li",{key:t+","+a,style:{listStyle:"none"}},l.a.createElement("label",null,l.a.createElement("input",{onChange:()=>g(e.label),type:"checkbox",checked:!!j.find(t=>t.label===e.label)}),e.label))))))))}}}]);