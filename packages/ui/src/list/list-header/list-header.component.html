<div class="ec-list-header">
  <div class="ec-list-cell ec-list-item__selector" *ngIf="list?.config?.selectMode&&!list?.isEmpty()">
    <input type="checkbox" (click)="selection?.toggleAll(list?.page)" [checked]="selection?.hasAll(list?.page)" [disabled]="selection?.config?.solo">
  </div>
  <div class="ec-list-cell" *ngFor="let field of list?.fields;let i = index" 
    [ngClass]="'ec-list-cell_' + field.view + ' ' + field?.classes" 
    [class.is-hidden]="field.hideInList"
    [class.is-sortable]="field.sortable" 
    [class.is-sorted]="list.isSorted(field.property)" 
    [class.is-filterable]="field.filterable"
    [class.is-filtered]="list.isFiltered(field.property)" 
    [class.is-filter-active]="filterPop.visible" 
    [class.is-sorted-desc]="list.isSorted(field.property, true)" 
    [class.is-sorted-asc]="list.isSorted(field.property, false)">

    <a (click)="editFilter(filterPop)" class="is-filterable-control" *ngIf="field.filterable">
      <ec-icon name="find"></ec-icon>
    </a>

    <span class="ec-list-column-title" (click)="field.sortable&&list.toggleSort(field.property)">
      {{fieldLabel(field)}}
    </span>
    <span class="is-sortable-indicator" *ngIf="field.sortable"></span>

    <ec-pop #filterPop class="is-filterable-pop">
       <!-- [ngClass]="field.filterPopClass" -->
      <ec-input [field]="field" [group]="filterForm?.group" [debounce]="200" *ngIf="field.filterable&&filterForm?.group?.get(field?.property)" (changed)="applyFilter(field.property, $event)"></ec-input>
      <a (click)="removeFilter(field.property, filterForm?.group?.get(field.property));filterPop.hide()" class="is-filterable-filter__reset">&times;</a>
    </ec-pop>
  </div>

  <div class="dropdown dropdown_right ec-list-column-filter" tabindex="0" *ngIf="!list?.config?.disableColumnFilter">
    <span>&#9776;</span>
    <div class="dropdown-options ec-list-column-filter-options">
      <ul>
        <li class="ec-list-column-filter-option" *ngFor="let field of list?.fields" [class.is-active]="!field.hideInList"
          [class.is-hidden]="field.hideInColumnFilter">
          <div class="form-boolean" (click)="toggleVisibility(field)">
            <ec-icon [name]="field.hideInList?'square':'check-box'">{{fieldLabel(field)}}</ec-icon>
          </div>
        </li>
      </ul>
    </div>
  </div>
</div>

<ec-form [config]="list?.config" [value]="list?.config?.filter" [empty]="true" #filterForm></ec-form>