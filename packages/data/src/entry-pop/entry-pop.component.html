<div class="ec-pop-container" [class.is-active]="active" [class.is-visible]="visible">
  <div class="ec-pop ec-entry-pop" *ngIf="active">
    <header class="ec-pop-header">
      <button (click)="hide()" type="button" class="ec-pop__dismiss">
        <ec-icon name="close-x-big"></ec-icon>
      </button>
    </header>
    <div class="ec-pop-body">
      <ec-entry-form [model]="model" [submitButton]="false" [loader]="popLoader" [config]="config"
      (submitted)="formSubmitted($event)" [entry]="entry" (deleted)="hide()" 
      #crudForm></ec-entry-form>
    </div>
    <footer class="ec-pop-footer">
      <nav class="nav">
        <ul class="nav__items">
          <li class="nav__item" *ngIf="config?.develop">
            <!--TODO placeholder config for 'code'-->
            <button (click)="log(crudForm)" class="btn">
              <ec-icon name="brackets"></ec-icon>
            </button>
          </li>
          <li class="nav__item" *ngIf="hasMethod('delete')&&crudForm.isEditing()">
            <!--TODO placeholder config for 'lÃ¶schen'-->
            <button (click)="crudForm.deleteEntry()" class="btn" type="button">
              <ec-icon name="trash"></ec-icon>
            </button>
          </li>
          <li class="nav__item" *ngIf="maySave(crudForm)">
            <!--TODO placeholder config for 'speichern'-->
            <button (click)="crudForm.submit()" [disabled]="crudForm.group?.invalid" type="button"
                    class="btn btn_save" [class.is-disabled]="crudForm.group?.invalid">
              <ec-icon name="save"></ec-icon>
            </button>
          </li>
        </ul>
      </nav>
    </footer>
    <ec-loader #popLoader class="ec-loader ec-loader_overlay ec-loader_global"></ec-loader>
  </div>
</div>
