<div class="ec-pop-container" [class.is-active]="active" [class.is-visible]="visible">
  <div class="ec-pop" *ngIf="active">
    <header class="ec-pop-header">
      <button (click)="hide()" class="ec-pop__dismiss" type="button">
        <ec-icon name="close-x-big"></ec-icon>
      </button>
    </header>
    <div class="ec-pop-body ec-dropzone" (ecDropzone)="uploader?.uploadFiles($event.dataTransfer.files,$event)">

      <ec-assetgroup-select [readOnly]="config.forceGroup||(assetGroupID==='legacyAsset')" [disableLegacy]="assetGroupID!=='legacyAsset'&&!selection.isEmpty()"
        [assetGroupID]="assetGroupID" (groupChanged)="setGroup($event)"></ec-assetgroup-select>

      <div class="ec-dropzone-info">
        Drop to upload!
      </div>
      <div class="ec-asset-upload ec-dropzone" *ngIf="assetGroupID">
        <ec-upload (groupChanged)="setGroup($event)" #uploader [assetGroupID]="assetGroupID" [loader]="popLoader" (success)="uploader.selectUpload($event, selection, config.solo)"></ec-upload>
        <a (click)="uploader.trigger()">Hochladen</a>

      </div>
      <!-- legacy asset list -->
      <ec-resource-list *ngIf="assetGroupID==='legacyAsset'&&sdk.apiResolved" relation="legacyAsset" [api]="sdk.api" [selection]="selection"
        (columnClicked)="select($event)" [config]="config" [loader]="popLoader"></ec-resource-list>
      <!-- new asset list -->
      <ec-resource-list *ngIf="assetGroupID&&assetGroupID!=='legacyAsset'&&sdk.apiResolved" [relation]="'dmAsset.'+assetGroupID"
        [api]="sdk.api" [selection]="selection" (columnClicked)="select($event)" [config]="config" [loader]="popLoader"></ec-resource-list>
    </div>
    <ec-loader #popLoader class="ec-loader ec-loader_global"></ec-loader>
  </div>
</div>