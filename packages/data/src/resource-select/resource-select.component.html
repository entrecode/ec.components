<div class="ec-entry-select" *ngIf="selection">
    <div class="ec-select" [class.ec-select_solo]="solo" [class.ec-select_dirty]="selection.items.length" (click)="pop.toggle()&&clickInside($event)">
        <span class="ec-select__placeholder" *ngIf="!selection.items.length">
            {{placeholder||'Ausw√§hlen'}}
        </span>
        <ul class="ec-select-selected" *ngIf="selection.items.length">
            <li *ngFor="let selected of selection?.items">
                <span [class.tag]="!solo" (click)="!solo&&editItem(selected,$event)">
                    {{selected.display()}}
                    <a (click)="removeItem(selected,$event)">&times;</a>
                </span>
            </li>
        </ul>
        <ec-pop (click)="clickInside($event)" [ngClass]="config?.nestedPopClass || 'ec-select-options'" #dropdown [active]="config?.nestedPopActive"
            [visible]="config?.nestedPopVisible">
            <ec-resource-list [relation]="relation" [api]="api" *ngIf="selection&&dropdown.active" [config]="dropdownConfig" [selection]="selection"
                (columnClicked)="select($event)"></ec-resource-list>
        </ec-pop>
        
        <ec-resource-list-pop #listPop (click)="clickInside($event)" [ngClass]="getPopClass()" class="ec-resource-list-pop" #resourceListPop
            [api]="api" [relation]="relation" [config]="config" [selection]="selection"></ec-resource-list-pop>

    </div>
    <ec-resource-pop #resourcePop [api]="api" [relation]="relation" [ngClass]="getPopClass()" [config]="config" (submitted)="formSubmitted($event)"
        (deleted)="removeItem($event)"></ec-resource-pop>
    <nav class="ec-entry-select__controls">
        <a (click)="editItem(selection.items[0],$event)" class="btn btn_clear" *ngIf="solo&&!config.disableCreatePop&&hasMethod('put')&&!selection.isEmpty()">
            <ec-icon name="pencil"></ec-icon>
        </a>
        <a (click)="listPop.show()" class="btn btn_clear" *ngIf="!config?.disableListPop&&hasMethod('get')">
            <ec-icon name="list-bullets"></ec-icon>
        </a>
        <a (click)="resourcePop.create()" class="btn btn_clear" *ngIf="!config?.disableCreatePop&&hasMethod('post')">
            <ec-icon name="add"></ec-icon>
        </a>
    </nav>
</div>