<div class="ec-entry-select" *ngIf="selection">
    <div class="ec-select" [class.ec-select_solo]="solo" [class.ec-select_dirty]="selection.items.length" (click)="pop.toggle()&&clickInside($event)">
        <span class="ec-select__placeholder" *ngIf="!selection.items.length">
            {{placeholder||'Ausw√§hlen'}}
        </span>
        <ul class="ec-select-selected" *ngIf="selection.items.length">
            <li *ngFor="let selected of selection?.items">
                <span [class.tag]="!solo" (mousedown)="clickItem(selected)">
                    {{selected.display()}}
                    <a (mousedown)="selection.remove(selected)" *ngIf="!solo">&times;</a>
                </span>
            </li>
        </ul>
        <ec-pop (click)="clickInside($event)" [ngClass]="field?.nestedPopClass || 'ec-select-options'" #crudPop [active]="field?.nestedPopActive"
            [visible]="field?.nestedPopVisible">
            <ec-resource-list [relation]="relation" [api]="api" *ngIf="selection&&crudPop.active" [config]="dropdownConfig" [selection]="selection"
                (columnClicked)="select($event)"></ec-resource-list>
        </ec-pop>
        <ec-pop (click)="clickInside($event)" [ngClass]="getPopClass()" #listPop>
            <header class="ec-pop-header">
                <button (click)="listPop.hide()" type="button" class="ec-pop__dismiss">
                    <ec-icon name="close-x-big"></ec-icon>
                </button>
            </header>
            <div class="ec-pop-body">
                <ec-resource-list [relation]="relation" [api]="api" *ngIf="selection&&listPop.active" [config]="config" [selection]="selection"
                    (columnClicked)="select($event)"></ec-resource-list>
            </div>
        </ec-pop>
    </div>
    <ec-resource-pop #resourcePop [api]="api" [relation]="relation" [ngClass]="getPopClass()" [config]="config" (submitted)="formSubmitted($event,resourcePop)"></ec-resource-pop>
    <nav class="ec-entry-select__controls">
        <a (click)="listPop.show()" class="btn btn_clear" *ngIf="!config?.disableListPop&&hasMethod('get')">
            <ec-icon name="list-bullets"></ec-icon>
        </a>
        <a (click)="resourcePop.show()" class="btn btn_clear" *ngIf="!config?.disableCreatePop&&hasMethod('post')">
            <ec-icon name="add"></ec-icon>
        </a>
    </nav>
</div>